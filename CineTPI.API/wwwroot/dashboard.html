<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dashboard - CineTPI</title>

    <!-- Bootstrap + Icons + Charts -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="css/global.css">
    <link rel="stylesheet" href="css/dashboard.css">
    <script src="js/auth.js"></script>
</head>

<body>
  <div class="sidebar">
    <h4><i class="fa-solid fa-clapperboard me-2"></i> CineTPI</h4>
    <a href="#r1"><i class="fa-solid fa-ticket me-2"></i> Reservas</a>
    <a href="#r2"><i class="fa-solid fa-coins me-2"></i> Recaudaci√≥n</a>
    <a href="#r3"><i class="fa-solid fa-users me-2"></i> Clientes</a>
    <a href="#r4"><i class="fa-solid fa-film me-2"></i> Funciones</a>
    <a href="#r5"><i class="fa-solid fa-id-card me-2"></i> Perfil Cliente</a>
  </div>

  <div class="content">
    <nav class="navbar navbar-expand-lg bg-light shadow-sm rounded mb-4 px-3">
      <div class="container-fluid">
        <span class="navbar-brand fw-semibold">üìä Dashboard</span>
        <a href="index.html">üéüÔ∏è Volver a Cartelera</a>
        <a href="admin.html">üé¨Panel de admin</a>
      </div>
    </nav>

    <div id="dashboards" class="container-fluid">

      <!-- RESERVAS POR ESTADO -->
      <section id="r1" class="mb-5">

        <h3>Reservas por Estado (Este Mes)</h3>
        <div class="chart-container">
            <canvas id="chart-reservas"></canvas>
        </div>

        <div class="table-responsive">
          <table id="tabla-reporte-reservas" class="table table-striped table-bordered">
            <thead class="table-dark">
              <tr>
                <th>Estado</th>
                <th>Cantidad</th>
                <th>Total Recaudado</th>
              </tr>
            </thead>
            <tbody id="tbody-reporte-reservas">
              <tr><td colspan="3">Cargando...</td></tr>
            </tbody>
          </table>
        </div>
      </section>

      <!-- RECAUDACI√ìN POR PEL√çCULA -->
      <section id="r2" class="mb-5">
        <h3>Recaudaci√≥n por Pel√≠cula</h3>
        <div class="chart-container">
            <canvas id="chart-recaudacion"></canvas>
        </div>

        <form id="form-recaudacion" class="row g-3 mb-3">
          <div class="col-md-4">
            <label for="fecha-desde" class="form-label">Fecha Desde:</label>
            <input type="date" id="fecha-desde" class="form-control" required>
          </div>
          <div class="col-md-4">
            <label for="fecha-hasta" class="form-label">Fecha Hasta:</label>
            <input type="date" id="fecha-hasta" class="form-control" required>
          </div>
          <div class="col-md-4 d-flex align-items-end">
            <button type="submit" class="btn btn-dark w-100">Consultar</button>
          </div>
        </form>
        <div class="table-responsive">
          <table id="tabla-reporte-recaudacion" class="table table-striped table-bordered">
            <thead class="table-dark">
              <tr>
                <th>ID</th>
                <th>Pel√≠cula</th>
                <th>Entradas Vendidas</th>
                <th>Total Recaudado</th>
              </tr>
            </thead>
            <tbody id="tbody-reporte-recaudacion">
              <tr><td colspan="4">Ingrese un rango de fechas...</td></tr>
            </tbody>
          </table>
        </div>
      </section>

      <!--  TOP CLIENTES  -->
      <section id="r3" class="mb-5">
        <h3>Top Clientes (Mejores Clientes)</h3>
       <div class="chart-container">
            <canvas id="chart-clientes"></canvas>
        </div>
        <div class="table-responsive">
          <table id="tabla-reporte-clientes" class="table table-striped table-bordered">
            <thead class="table-dark">
              <tr>
                <th>ID</th>
                <th>Nombre</th>
                <th>Pel√≠culas Vistas</th>
                <th>Total Entradas</th>
                <th>Total Gastado</th>
              </tr>
            </thead>
            <tbody id="tbody-reporte-clientes">
              <tr><td colspan="5">Cargando...</td></tr>
            </tbody>
          </table>
        </div>
      </section>

      <!--  FUNCIONES POR G√âNERO  -->
      <section id="r4" class="mb-5">
        <h3>Funciones por G√©nero</h3>
        <form id="form-funciones-genero" class="row g-3 mb-3">
          <div class="col-md-4">
            <label for="genero" class="form-label">G√©nero:</label>
            <input type="text" id="genero" class="form-control" placeholder="Ej: Acci√≥n, Terror, Comedia">
          </div>
          <div class="col-md-3">
            <label for="fecha-desde-gen" class="form-label">Desde:</label>
            <input type="date" id="fecha-desde-gen" class="form-control">
          </div>
          <div class="col-md-3">
            <label for="fecha-hasta-gen" class="form-label">Hasta:</label>
            <input type="date" id="fecha-hasta-gen" class="form-control">
          </div>
          <div class="col-md-2 d-flex align-items-end">
            <button type="submit" class="btn btn-dark w-100">Buscar</button>
          </div>
        </form>
        <div class="table-responsive">
          <table class="table table-striped table-bordered">
            <thead class="table-dark">
              <tr>
                <th>T√≠tulo</th>
                <th>G√©nero</th>
                <th>Sala</th>
                <th>Tipo Sala</th>
                <th>Formato</th>
                <th>Fecha</th>
                <th>Horario</th>
                <th>Director</th>
              </tr>
            </thead>
            <tbody id="tbody-funciones-genero"></tbody>
          </table>
        </div>
      </section>

      <!--  PERFIL DEL CLIENTE  -->
      <section id="r5">
        <h3>Perfil del Cliente</h3>
        <form id="form-perfil-cliente" class="row g-3 mb-3">
          <div class="col-md-4">
            <label for="pc-cliente-id" class="form-label">ID Cliente:</label>
            <input type="number" id="pc-cliente-id" class="form-control" placeholder="Ej: 1001" required>
          </div>
          <div class="col-md-2 d-flex align-items-end">
            <button type="submit" class="btn btn-dark w-100">Buscar</button>
          </div>
        </form>

        <div id="pc-info" class="row g-3 mb-3" style="display:none;">
          <div class="col-md-3"><div class="p-3 border rounded bg-light"><div class="text-muted">Cliente</div><div id="pc-nombre" class="fw-bold fs-5"></div></div></div>
          <div class="col-md-3"><div class="p-3 border rounded bg-light"><div class="text-muted">Fecha registro</div><div id="pc-fecha-registro" class="fw-bold"></div></div></div>
          <div class="col-md-2"><div class="p-3 border rounded bg-light"><div class="text-muted">Gasto entradas</div><div id="pc-gasto-entradas" class="fw-bold"></div></div></div>
          <div class="col-md-2"><div class="p-3 border rounded bg-light"><div class="text-muted">Gasto productos</div><div id="pc-gasto-productos" class="fw-bold"></div></div></div>
          <div class="col-md-2"><div class="p-3 border rounded bg-light"><div class="text-muted">G√©nero favorito</div><div id="pc-genero-favorito" class="fw-bold"></div></div></div>
        </div>

        <div class="table-responsive">
          <table class="table table-striped table-bordered">
            <thead class="table-dark">
              <tr>
                <th>Pel√≠cula</th>
                <th>Estreno</th>
                <th>Fecha funci√≥n</th>
              </tr>
            </thead>
            <tbody id="pc-tbody-historial"></tbody>
          </table>
        </div>
      </section>
    </div>
  </div>

  <script src="js/dashboard.js"></script>
</body>
</html>
